<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DashStory SDK ç¤ºä¾‹</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }

    .dashboard {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 24px;
      border-radius: 12px;
      margin-bottom: 20px;
    }

    .header h1 {
      font-size: 24px;
      margin-bottom: 8px;
    }

    .header p {
      opacity: 0.8;
      font-size: 14px;
    }

    .panels {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .panel {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .panel-title {
      font-size: 16px;
      font-weight: 600;
      color: #374151;
    }

    .panel-badge {
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 4px;
      background: #e5e7eb;
      color: #6b7280;
    }

    .panel-value {
      font-size: 32px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 8px;
    }

    .panel-value.positive {
      color: #059669;
    }

    .panel-value.negative {
      color: #dc2626;
    }

    .panel-change {
      font-size: 14px;
      color: #6b7280;
    }

    .panel-change.positive::before {
      content: 'â†‘';
      color: #059669;
      margin-right: 4px;
    }

    .panel-change.negative::before {
      content: 'â†“';
      color: #dc2626;
      margin-right: 4px;
    }

    .chart-placeholder {
      height: 120px;
      background: #f9fafb;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #9ca3af;
      margin-top: 16px;
    }

    .instructions {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-top: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    .instructions h3 {
      margin-bottom: 12px;
      color: #374151;
    }

    .instructions ul {
      padding-left: 20px;
      color: #6b7280;
    }

    .instructions li {
      margin-bottom: 8px;
    }

    .instructions code {
      background: #f3f4f6;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <div class="dashboard">
    <div class="header">
      <h1>é”€å”®æ•°æ®ä»ªè¡¨æ¿</h1>
      <p>æŒ‰ Ctrl+Shift+D æ‰“å¼€ DashStory æ¼”ç¤ºæ¨¡å¼</p>
    </div>

    <div class="panels">
      <div class="panel" id="panel-revenue">
        <div class="panel-header">
          <span class="panel-title">æœˆåº¦æ”¶å…¥</span>
          <span class="panel-badge">æœ¬æœˆ</span>
        </div>
        <div class="panel-value positive">$135,000</div>
        <div class="panel-change positive">è¾ƒä¸Šæœˆå¢é•¿ 12.5%</div>
        <div class="chart-placeholder">ğŸ“ˆ è¶‹åŠ¿å›¾</div>
      </div>

      <div class="panel" id="panel-orders">
        <div class="panel-header">
          <span class="panel-title">è®¢å•æ•°é‡</span>
          <span class="panel-badge">æœ¬æœˆ</span>
        </div>
        <div class="panel-value">1,234</div>
        <div class="panel-change positive">è¾ƒä¸Šæœˆå¢é•¿ 8.3%</div>
        <div class="chart-placeholder">ğŸ“Š åˆ†å¸ƒå›¾</div>
      </div>

      <div class="panel" id="panel-customers">
        <div class="panel-header">
          <span class="panel-title">æ–°å¢å®¢æˆ·</span>
          <span class="panel-badge">æœ¬æœˆ</span>
        </div>
        <div class="panel-value">89</div>
        <div class="panel-change negative">è¾ƒä¸Šæœˆå‡å°‘ 5.2%</div>
        <div class="chart-placeholder">ğŸ‘¥ å¢é•¿å›¾</div>
      </div>

      <div class="panel" id="panel-conversion">
        <div class="panel-header">
          <span class="panel-title">è½¬åŒ–ç‡</span>
          <span class="panel-badge">æœ¬æœˆ</span>
        </div>
        <div class="panel-value positive">3.2%</div>
        <div class="panel-change positive">è¾ƒä¸Šæœˆå¢é•¿ 0.5%</div>
        <div class="chart-placeholder">ğŸ¯ æ¼æ–—å›¾</div>
      </div>
    </div>

    <div class="instructions">
      <h3>ä½¿ç”¨è¯´æ˜</h3>
      <ul>
        <li>æŒ‰ <code>Ctrl+Shift+D</code> (Mac: <code>âŒ˜+Shift+D</code>) æ‰“å¼€æ¼”ç¤ºæ¨¡å¼æ§åˆ¶æ </li>
        <li>é€‰æ‹©è¯­éŸ³é£æ ¼å’Œè¦æ’­æ”¾çš„Panel</li>
        <li>ç‚¹å‡»"æ’­æ”¾"æŒ‰é’®å¼€å§‹AIè¯­éŸ³è§£è¯»</li>
        <li>æ”¯æŒæš‚åœã€ç»§ç»­å’Œåœæ­¢æ§åˆ¶</li>
      </ul>
    </div>
  </div>

  <!-- DashStory SDK -->
  <script type="module">
    // æ³¨æ„ï¼šå®é™…ä½¿ç”¨æ—¶è¯·æ›¿æ¢ä¸ºCDNæˆ–npmåŒ…å¼•å…¥
    import DashStory from '../dist/dashstory-sdk.esm.js';

    // åˆå§‹åŒ–SDK
    const dashstory = new DashStory({
      apiKey: 'your-api-key-here', // æ›¿æ¢ä¸ºçœŸå®API Key
      apiEndpoint: 'http://localhost:8000/api/v1',
      language: 'zh',
      hotkey: 'Ctrl+Shift+D'
    });

    // æ³¨å†ŒPanelæ•°æ®
    dashstory.registerPanels([
      {
        panelId: 'revenue_trend',
        title: 'æœˆåº¦æ”¶å…¥è¶‹åŠ¿',
        metricType: 'time_series',
        unit: 'USD',
        timeRange: '2025-01-01~2025-12-31',
        data: [
          { t: '2025-01', v: 120000 },
          { t: '2025-02', v: 135000 }
        ],
        thresholds: { warning: 100000, critical: 80000 },
        order: 1
      },
      {
        panelId: 'order_count',
        title: 'è®¢å•æ•°é‡åˆ†å¸ƒ',
        metricType: 'distribution',
        unit: 'ä¸ª',
        timeRange: '2025-02',
        data: [
          { category: 'ç”µå­äº§å“', value: 450 },
          { category: 'æœè£…', value: 380 },
          { category: 'é£Ÿå“', value: 280 },
          { category: 'å…¶ä»–', value: 124 }
        ],
        order: 2
      },
      {
        panelId: 'new_customers',
        title: 'æ–°å¢å®¢æˆ·',
        metricType: 'single_value',
        unit: 'äºº',
        timeRange: '2025-02',
        data: {
          value: 89,
          previousValue: 94,
          target: 100
        },
        thresholds: { warning: 80, critical: 50 },
        order: 3
      },
      {
        panelId: 'conversion_rate',
        title: 'è½¬åŒ–ç‡å¯¹æ¯”',
        metricType: 'comparison',
        unit: '%',
        timeRange: '2025-02',
        data: [
          { name: 'ç½‘ç«™', current: 3.2, previous: 2.7 },
          { name: 'APP', current: 4.5, previous: 4.2 },
          { name: 'å°ç¨‹åº', current: 2.8, previous: 3.1 }
        ],
        order: 4
      }
    ]);

    // åˆå§‹åŒ–å¹¶å¯åŠ¨
    dashstory.init().then(() => {
      console.log('DashStory SDK å·²å°±ç»ª');
    }).catch(err => {
      console.error('SDK åˆå§‹åŒ–å¤±è´¥:', err);
    });

    // ç›‘å¬äº‹ä»¶
    dashstory.on('playback:started', (data) => {
      console.log('å¼€å§‹æ’­æ”¾:', data.panelId);
    });

    dashstory.on('playback:ended', (data) => {
      console.log('æ’­æ”¾ç»“æŸ:', data.panelId);
    });

    // æš´éœ²åˆ°å…¨å±€ç”¨äºè°ƒè¯•
    window.dashstory = dashstory;
  </script>
</body>
</html>
