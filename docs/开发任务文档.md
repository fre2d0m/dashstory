# 开发任务文档（Development Task Plan）— DashStory

> 版本：v1.0  
> 作者：架构与交付  
> 日期：2026-02-03  
> 适用范围：SDK、演示模式 Bar、浏览器插件、后端编排、AI 能力与运维

## 目录
- [摘要（Executive Summary）](#摘要executive-summary)
- [1. 任务目标与范围](#1-任务目标与范围)
- [2. 任务分解（MECE）](#2-任务分解mece)
- [3. 依赖关系与关键路径](#3-依赖关系与关键路径)
- [4. 里程碑与交付物](#4-里程碑与交付物)
- [5. 任务清单（WBS）](#5-任务清单wbs)
- [6. 质量标准与验收](#6-质量标准与验收)
- [7. 资源与角色建议](#7-资源与角色建议)
- [8. 风险与缓解](#8-风险与缓解)
- [9. 需确认事项](#9-需确认事项)

---

## 摘要（Executive Summary）
本任务文档以 MVP 交付为目标，覆盖 **SDK 注入与演示模式 Bar、插件截图与解读、后端编排与语音合成** 的全链路研发任务。任务拆分遵循 MECE 原则，明确依赖与关键路径，并给出可验收的交付物与质量标准，为后续排期与资源分配提供结构化依据。

---

## 1. 任务目标与范围
### 1.1 目标
1) 在 MVP 阶段完成 **SDK + 插件 + 后端编排** 的可用闭环；  
2) 端到端解读与播放满足 **P95 ≤ 5 秒** 的目标（设计目标）；  
3) 满足最小合规要求：数据最小化存储 + Token 管理。

### 1.2 范围
**In-Scope**  
1) SDK：panel 注册、数据更新、演示模式 Bar；  
2) 插件：截图采集、解读生成、语音播放；  
3) 后端：Auth、API、编排、TTS 与存储；  
4) 基础监控与日志。

**Out-of-Scope**  
1) 端到端语音克隆（需授权）；  
2) 高级 BI 编辑器；  
3) 深度企业审计与 SSO（可进入下一阶段）。

---

## 2. 任务分解（MECE）
### 2.1 前端与接入层
1) SDK 核心与 bar 组件  
2) 浏览器插件（截图、识别、播放）

### 2.2 后端与 AI 编排层
1) API Gateway 与认证  
2) 编排服务与模型路由  
3) 语音合成与文件存储

### 2.3 基础设施与运维
1) 数据库与缓存  
2) 监控与日志  
3) 部署与 CI/CD

---

## 3. 依赖关系与关键路径
### 3.1 关键路径
1) Auth 与 API 基础能力 →  
2) 编排服务 →  
3) TTS 与存储 →  
4) SDK/插件接入 →  
5) 端到端联调

### 3.2 主要依赖
- 插件与 SDK 接入依赖后端 API 稳定；  
- 语音播放依赖 TTS 与对象存储完成；  
- 端到端性能依赖缓存与并行优化策略落地。

---

## 4. 里程碑与交付物
> 说明：时间为估算值（基于经验模型），用于规划而非承诺。

| 里程碑 | 目标 | 交付物 |
|---|---|---|
| M0 需求冻结 | 需求评审完成 | URD + 详细设计 |
| M1 基础平台 | Auth/API/存储可用 | API v1 + Token 管理 |
| M2 SDK 可用 | panel 注册与 bar | SDK 包 + 示例 |
| M3 插件可用 | 截图/解读/播放 | 插件 Beta |
| M4 MVP 联调 | 端到端可演示 | 演示 Demo + 测试报告 |

---

## 5. 任务清单（WBS）
> 任务优先级：P0（必须）、P1（重要）、P2（可延后）  
> 规模估算：S=1-2人日，M=3-5人日，L=6-10人日（基于经验模型）

### 5.1 SDK 与演示模式 Bar
| ID | 任务 | 描述 | 依赖 | 优先级 | 规模 |
|---|---|---|---|---|---|
| SDK-01 | Panel Registry | panel 元数据注册与校验 | 无 | P0 | M |
| SDK-02 | Data Normalizer | 时间序列/对比类数据统一格式 | SDK-01 | P0 | M |
| SDK-03 | Batch Update | 多 panel 数据批量上报 | SDK-01 | P0 | S |
| SDK-04 | Hotkey Manager | 快捷键绑定与冲突检测 | 无 | P0 | S |
| SDK-05 | Bar UI | 演示模式 bar 注入与控制 | SDK-04 | P0 | M |
| SDK-06 | Playback Control | 播放全部/指定 panel | SDK-05 | P0 | M |
| SDK-07 | Telemetry | 播放次数、失败率埋点 | SDK-06 | P1 | S |

### 5.2 浏览器插件
| ID | 任务 | 描述 | 依赖 | 优先级 | 规模 |
|---|---|---|---|---|---|
| EXT-01 | 截图采集 | 区域/整页截图 | 无 | P0 | M |
| EXT-02 | 敏感遮盖 | 涂抹/遮挡工具 | EXT-01 | P1 | M |
| EXT-03 | API 调用 | 发送图片 + 参数 | M1 API | P0 | S |
| EXT-04 | 结果展示 | summary/highlights/risks | EXT-03 | P0 | S |
| EXT-05 | 音频播放 | 播放/暂停/下载 | EXT-03 | P0 | S |
| EXT-06 | 历史记录 | 最近 20 次记录 | EXT-05 | P1 | M |

### 5.3 后端与 AI 编排
| ID | 任务 | 描述 | 依赖 | 优先级 | 规模 |
|---|---|---|---|---|---|
| BE-01 | Auth & RBAC | Token 管理、组织权限 | 无 | P0 | M |
| BE-02 | API Gateway | /api/v1 接口与限流 | BE-01 | P0 | M |
| BE-03 | Orchestrator | 状态机与超时控制 | BE-02 | P0 | L |
| BE-04 | Model Router | 图像/文本路由策略 | BE-03 | P0 | M |
| BE-05 | Narration NLG | 结构化文本生成 | BE-03 | P0 | M |
| BE-06 | TTS 接入 | 语音合成与存储 | BE-03 | P0 | M |
| BE-07 | Storage Adapter | 音频与临时文件存储 | BE-06 | P0 | S |
| BE-08 | Usage Metering | 计量与统计 | BE-02 | P1 | M |

### 5.4 基础设施与运维
| ID | 任务 | 描述 | 依赖 | 优先级 | 规模 |
|---|---|---|---|---|---|
| OPS-01 | 数据库初始化 | PostgreSQL schema | BE-01 | P0 | S |
| OPS-02 | 缓存与队列 | Redis/队列配置 | BE-03 | P0 | S |
| OPS-03 | Observability | Metrics/Logs/Trace | BE-02 | P0 | M |
| OPS-04 | CI/CD | 自动化测试与部署 | 无 | P1 | M |

### 5.5 测试与验收
| ID | 任务 | 描述 | 依赖 | 优先级 | 规模 |
|---|---|---|---|---|---|
| QA-01 | SDK 单测 | panel 注册/更新 | SDK-01 | P0 | S |
| QA-02 | 插件 E2E | 截图 → 解读 → 播放 | EXT-05 | P0 | M |
| QA-03 | 后端压测 | 并发 100/500/1000 | BE-03 | P1 | M |
| QA-04 | 安全测试 | Token/权限/脱敏 | BE-01 | P0 | S |

---

## 6. 质量标准与验收
1) 端到端 P95 ≤ 5 秒（设计目标）；  
2) 播放成功率 ≥ 98%；  
3) 低置信度输出必须显式提示；  
4) SDK 集成时间 ≤ 1 天（样板项目验证）。

---

## 7. 资源与角色建议
| 角色 | 责任 | 规模建议 |
|---|---|---|
| 前端工程师 | SDK + Bar | 1-2 人 |
| 插件工程师 | Chrome/Edge 插件 | 1 人 |
| 后端工程师 | Auth/编排/存储 | 2 人 |
| AI 工程师 | 模型路由/提示词 | 1 人 |
| QA | E2E 与性能 | 1 人 |
（规模为经验估算，可根据团队调整）

---

## 8. 风险与缓解
| 风险 | 影响 | 缓解策略 |
|---|---|---|
| 模型延迟过高 | 体验不达标 | 缓存 + 并行化 + 文本先行 |
| 截图包含敏感数据 | 合规风险 | 默认遮盖 + 二次确认 |
| SDK 接入阻力 | 推广受阻 | 提供示例与自动校验 |

---

## 9. 需确认事项
1) MVP 是否需支持英文输出？  
2) 语音包首期数量与授权方式？  
3) 是否强制记录所有解读日志用于审计？
